-----------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/kahrens/MyProjects/pystacked/cert/log_cs_pystacked_class.txt
  log type:  text
 opened on:   3 Oct 2021, 15:10:15

. 
. clear all

.  
. net install pystacked, ///
>                 from(https://raw.githubusercontent.com/aahrens1/pystacked/main) replace
checking pystacked consistency and verifying not already installed...
all files already exist and are up to date.

. which pystacked 
/Users/kahrens/Library/Application Support/Stata/ado/plus/p/pystacked.ado
*! pystacked v0.1 (first release)
*! last edited: 3oct2021
*! authors: aa/ms

. python: import sklearn

. python: sklearn.__version__
'1.0'

. 
. 
. *******************************************************************************
. *** try voting                                                                                     
>                                      ***
. *******************************************************************************
. 
. insheet using https://archive.ics.uci.edu/ml/machine-learning-databases/spambase/spambase.data, cle
> ar comma
(58 vars, 4,601 obs)

.                                                 
. pystacked v58 v1-v57, type(class) pyseed(123) ///
>                                                         methods(lassocv rf nnet) /// 
>                                                         njobs(4) pipe1(poly2) ///
>                                                         voting voteweights(0.1 .4) ///
>                                                         votetype(soft)
joblib.externals.loky.process_executor._RemoteTraceback: 
"""
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/joblib/externals/loky/process_executor.py", line 431, 
> in _process_worker
    r = call_item()
  File "/usr/local/lib/python3.9/site-packages/joblib/externals/loky/process_executor.py", line 285, 
> in __call__
    return self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.9/site-packages/joblib/_parallel_backends.py", line 595, in __call__
    return self.func(*args, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/joblib/parallel.py", line 262, in __call__
    return [func(*args, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/joblib/parallel.py", line 262, in <listcomp>
    return [func(*args, **kwargs)
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-package
> s/sklearn/utils/fixes.py", line 209, in __call__
    return self.function(*args, **kwargs)
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-package
> s/sklearn/ensemble/_base.py", line 42, in _fit_single_estimator
    estimator.fit(X, y)
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-package
> s/sklearn/pipeline.py", line 394, in fit
    self._final_estimator.fit(Xt, y, **fit_params_last_step)
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-package
> s/sklearn/ensemble/_forest.py", line 441, in fit
    trees = Parallel(
  File "/usr/local/lib/python3.9/site-packages/joblib/parallel.py", line 1041, in __call__
    if self.dispatch_one_batch(iterator):
  File "/usr/local/lib/python3.9/site-packages/joblib/parallel.py", line 859, in dispatch_one_batch
    self._dispatch(tasks)
  File "/usr/local/lib/python3.9/site-packages/joblib/parallel.py", line 777, in _dispatch
    job = self._backend.apply_async(batch, callback=cb)
  File "/usr/local/lib/python3.9/site-packages/joblib/_parallel_backends.py", line 208, in apply_asyn
> c
    result = ImmediateResult(func)
  File "/usr/local/lib/python3.9/site-packages/joblib/_parallel_backends.py", line 572, in __init__
    self.results = batch()
  File "/usr/local/lib/python3.9/site-packages/joblib/parallel.py", line 262, in __call__
    return [func(*args, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/joblib/parallel.py", line 262, in <listcomp>
    return [func(*args, **kwargs)
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-package
> s/sklearn/utils/fixes.py", line 209, in __call__
    return self.function(*args, **kwargs)
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-package
> s/sklearn/ensemble/_forest.py", line 184, in _parallel_build_trees
    tree.fit(X, y, sample_weight=curr_sample_weight, check_input=False)
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-package
> s/sklearn/tree/_classes.py", line 937, in fit
    super().fit(
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-package
> s/sklearn/tree/_classes.py", line 352, in fit
    criterion = CRITERIA_CLF[self.criterion](
KeyError: 'friedman_mse'
"""

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 180, in run_stacked
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-package
> s/sklearn/ensemble/_voting.py", line 324, in fit
    return super().fit(X, transformed_y, sample_weight)
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-package
> s/sklearn/ensemble/_voting.py", line 74, in fit
    self.estimators_ = Parallel(n_jobs=self.n_jobs)(
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-package
> s/joblib/parallel.py", line 1054, in __call__
    self.retrieve()
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-package
> s/joblib/parallel.py", line 933, in retrieve
    self._output.extend(job.get(timeout=self.timeout))
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-package
> s/joblib/_parallel_backends.py", line 542, in wrap_future_result
    return future.result(timeout=timeout)
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/concurrent/f
> utures/_base.py", line 438, in result
    return self.__get_result()
  File "/usr/local/opt/python@3.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/concurrent/f
> utures/_base.py", line 390, in __get_result
    raise self._exception
KeyError: 'friedman_mse'
r(7102);

end of do-file

r(7102);

